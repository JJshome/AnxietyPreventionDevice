# 불안장애 예방장치 구현 요약

본 문서는 특허 10-2022-0007209(불안장애 예방장치) 및 10-2459338(저주파 자극기 제어장치)를 기반으로 구현된 시스템의 주요 구성요소와 기능을 요약합니다.

## 구현된 핵심 컴포넌트

### 1. 심박변이도(HRV) 기반 불안 예측 모듈
- `src/hrv_analyzer/hrv_anxiety_predictor.py`: 특허 10-2022-0007209에 기반한 불안장애 발생 가능성 예측 알고리즘
- 주요 기능:
  - SampEn(Sample Entropy) 기반 불안 수준 분류
  - 다양한 HRV 지표(SDNN, RMSSD, LF/HF 등) 활용
  - 불안 수준별 중재 추천 기능

### 2. 스테레오 자극기 제어 모듈
- `src/stimulation_controller/stereo_stimulator.py`: 특허 10-2459338에 기반한 스테레오 방식의 자극기 제어
- 주요 기능:
  - 두 개 이상의 자극기 동시 제어
  - 위상 지연 조절 (0.1~1.0초)
  - 자극 강도 밸런스 조절
  - 다양한 자극 파형 지원 (정현파, 구형파, 삼각파, 단상성, 양상성)
  - 음악 특성 기반 자극 패턴 생성

### 3. 중앙 제어 시스템
- `src/anxiety_prevention_controller.py`: 모든 컴포넌트를 통합하는 중앙 제어 모듈
- 주요 기능:
  - ECG 데이터 수집 및 처리
  - HRV 분석 및 불안 예측
  - 자동/수동 자극 제어
  - 이벤트 기반 통신
  - 다양한 작동 상태 관리

### 4. 시뮬레이션 환경
- `simulation/config.py`: 시뮬레이션 환경 설정
- `simulation/GUIDE.md`: 시뮬레이션 사용 가이드
- 주요 기능:
  - 다양한 불안 상태 시나리오 제공
  - ECG 신호 시뮬레이션
  - 실시간 모니터링 및 시각화
  - 시스템 전체 워크플로우 테스트

### 5. 배포 환경
- `Dockerfile`: 메인 애플리케이션 Docker 이미지
- `Dockerfile.simulation`: 시뮬레이션 환경 Docker 이미지
- `docker-compose.yml`: 전체 시스템 배포 설정
- 주요 기능:
  - 컨테이너화된 애플리케이션 배포
  - 웹 대시보드 및 API 서버
  - 데이터베이스 통합
  - 개발 및 운영 환경 분리

## 구현된 워크플로우

```
[웨어러블 심전도 센서] → [심전도 신호 처리] → [HRV 추출 및 분석]
         ↓
[불안장애 발생 가능성 예측] → [불안 수준 임계값 확인]
         ↓
  [자극 필요성 결정] → [스테레오 자극 파라미터 계산]
         ↓
[두 개의 저주파 자극기로 위상차를 갖는 자극 전달] → [효과 모니터링]
```

## 핵심 특허 기술 구현

### 특허 10-2022-0007209 (불안장애 예방장치)
- HRV 분석을 통한 불안장애 발생 가능성 예측
- SampEn 기반 불안 수준 분류
- 예측 결과에 따른 두개전기자극 제어

### 특허 10-2459338 (저주파 자극기 제어장치)
- 복수의 자극기 무선 제어
- 스테레오 자극 효과를 위한 위상차 적용
- 각 자극기별 밸런스 및 강도 조절
- 음악 특성(비트, 템포)에 따른 자극 패턴 제어

## 시스템 확장성

이 구현은 다음과 같은 확장 가능성을 제공합니다:

1. **다양한 센서 지원**: 인터페이스 기반 설계로 다양한 웨어러블 ECG 센서 통합 가능
2. **고급 분석 알고리즘**: 머신러닝/딥러닝 모델로 불안 예측 알고리즘 교체 가능
3. **원격 모니터링**: 웹 기반 대시보드로 환자 상태 원격 모니터링 지원
4. **데이터 분석**: 수집된 데이터를 통한 장기적 추세 분석 및 개인화된 자극 프로파일 개발
5. **추가 생체 신호 통합**: ECG 외에 다른 생체 신호(GSR, 호흡 등) 분석 통합 가능

## 주요 기술 스택

- **언어**: Python 3.9+
- **데이터 처리**: NumPy, Pandas, SciPy
- **신호 처리**: BiospPy, HeartPy, NeuroKit2
- **기계학습**: scikit-learn
- **시각화**: Matplotlib, Plotly
- **웹 인터페이스**: Flask, Socket.IO
- **데이터베이스**: MongoDB
- **무선 통신**: BLE (Bluetooth Low Energy)
- **배포**: Docker, Docker Compose

## 다음 단계 및 권장사항

1. **하드웨어 통합**: 실제 웨어러블 ECG 센서 및 저주파 자극기와 연동
2. **임상 검증**: 불안 예측 알고리즘의 정확도 및 효과 검증
3. **모바일 앱 개발**: 사용자 친화적인 모바일 인터페이스 개발
4. **보안 강화**: 의료 데이터 보안 및 개인정보 보호 강화
5. **다국어 지원**: 다양한 언어 및 지역화 지원

## 결론

본 구현은 특허 10-2022-0007209와 10-2459338의 핵심 기술을 성공적으로 통합하여, 심박변이도 분석을 통한 불안장애 예측 및 스테레오 방식의 두개전기자극을 제공하는 시스템을 구현했습니다. 시뮬레이션 환경과 함께 실제 배포를 위한 인프라도 구성되어, 추가 개발 및 실제 사용을 위한 기반을 마련했습니다.
